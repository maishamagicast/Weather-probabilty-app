{
  "version": 3,
  "sources": ["../../@esri/calcite-components/dist/components/calcite-flow/customElement.js"],
  "sourcesContent": ["/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\nv3.3.2 */\nimport { c as customElement } from \"../../chunks/runtime.js\";\nimport { css, html } from \"lit\";\nimport { LitElement, safeClassMap } from \"@arcgis/lumina\";\nimport { createRef, ref } from \"lit-html/directives/ref.js\";\nimport { c as createObserver } from \"../../chunks/observers.js\";\nimport { y as whenAnimationDone } from \"../../chunks/dom.js\";\nimport { u as useSetFocus } from \"../../chunks/useSetFocus.js\";\nconst CSS = {\n  frame: \"frame\",\n  frameAdvancing: \"frame--advancing\",\n  frameRetreating: \"frame--retreating\"\n};\nconst styles = css`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:relative;display:flex;inline-size:100%;flex:1 1 auto;align-items:stretch;overflow:hidden;background-color:transparent}:host .frame{position:relative;margin:0;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;padding:0;animation-name:none;animation-duration:var(--calcite-animation-timing);background-color:var(--calcite-flow-background-color)}:host ::slotted(*){display:none;block-size:100%}:host ::slotted(*[selected]){display:flex}:host ::slotted(.calcite-match-height:last-child){display:flex;flex:1 1 auto;overflow:hidden}:host .frame--advancing{animation-name:calcite-frame-advance}:host .frame--retreating{animation-name:calcite-frame-retreat}@keyframes calcite-frame-advance{0%{--tw-bg-opacity: .5;transform:translate3d(50px,0,0)}to{--tw-bg-opacity: 1;transform:translateZ(0)}}@keyframes calcite-frame-retreat{0%{--tw-bg-opacity: .5;transform:translate3d(-50px,0,0)}to{--tw-bg-opacity: 1;transform:translateZ(0)}}:host([hidden]){display:none}[hidden]{display:none}`;\nclass Flow extends LitElement {\n  constructor() {\n    super();\n    this.frameRef = createRef();\n    this.itemMutationObserver = createObserver(\"mutation\", () => this.updateItemsAndProps());\n    this.items = [];\n    this.selectedIndex = -1;\n    this.focusSetter = useSetFocus()(this);\n    this.flowDirection = \"standby\";\n    this.listen(\"calciteInternalFlowItemChange\", this.handleCalciteInternalFlowItemChange);\n    this.listen(\"calciteFlowItemBack\", this.handleItemBackClick);\n  }\n  static {\n    this.properties = { flowDirection: [16, {}, { state: true }], customItemSelectors: 1 };\n  }\n  static {\n    this.styles = styles;\n  }\n  async back() {\n    const { items, selectedIndex } = this;\n    const selectedItem = items[selectedIndex];\n    const nextSelectedItem = items[selectedIndex - 1];\n    if (!selectedItem || !nextSelectedItem) {\n      return;\n    }\n    const beforeBack = selectedItem.beforeBack ? selectedItem.beforeBack : () => Promise.resolve();\n    try {\n      await beforeBack.call(selectedItem);\n    } catch {\n      return;\n    }\n    selectedItem.selected = false;\n    nextSelectedItem.selected = true;\n    return nextSelectedItem;\n  }\n  async setFocus(options) {\n    return this.focusSetter(() => this.items[this.selectedIndex], options);\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.itemMutationObserver?.observe(this.el, { childList: true, subtree: true });\n  }\n  willUpdate(changes) {\n    if (changes.has(\"flowDirection\") && (this.hasUpdated || this.flowDirection !== \"standby\")) {\n      this.handleFlowDirectionChange(this.flowDirection);\n    }\n  }\n  loaded() {\n    this.updateItemsAndProps();\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.itemMutationObserver?.disconnect();\n  }\n  async handleFlowDirectionChange(flowDirection) {\n    if (flowDirection === \"standby\" || !this.frameRef.value) {\n      return;\n    }\n    await whenAnimationDone(this.frameRef.value, flowDirection === \"retreating\" ? \"calcite-frame-retreat\" : \"calcite-frame-advance\");\n    this.resetFlowDirection();\n  }\n  handleCalciteInternalFlowItemChange(event) {\n    event.stopPropagation();\n    this.updateFlowProps();\n  }\n  async handleItemBackClick(event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n    await this.back();\n    return this.setFocus();\n  }\n  resetFlowDirection() {\n    this.flowDirection = \"standby\";\n  }\n  getFlowDirection(oldSelectedIndex, newSelectedIndex) {\n    const allowRetreatingDirection = oldSelectedIndex > 0;\n    const allowAdvancingDirection = oldSelectedIndex > -1 && newSelectedIndex > 0;\n    if (!allowAdvancingDirection && !allowRetreatingDirection) {\n      return \"standby\";\n    }\n    return newSelectedIndex < oldSelectedIndex ? \"retreating\" : \"advancing\";\n  }\n  updateItemsAndProps() {\n    const { customItemSelectors, el } = this;\n    const newItems = Array.from(el.querySelectorAll(`calcite-flow-item${customItemSelectors ? `,${customItemSelectors}` : \"\"}`)).filter((flowItem) => flowItem.closest(\"calcite-flow\") === el);\n    this.items = newItems;\n    this.ensureSelectedFlowItemExists();\n    this.updateFlowProps();\n  }\n  updateFlowProps() {\n    const { selectedIndex, items } = this;\n    const foundSelectedIndex = this.findSelectedFlowItemIndex(items);\n    items.forEach((flowItem, index) => {\n      const currentlySelected = index === foundSelectedIndex;\n      if (!currentlySelected) {\n        flowItem.menuOpen = false;\n      }\n      flowItem.showBackButton = currentlySelected && foundSelectedIndex > 0;\n    });\n    if (foundSelectedIndex === -1) {\n      return;\n    }\n    if (selectedIndex !== foundSelectedIndex) {\n      this.flowDirection = this.getFlowDirection(selectedIndex, foundSelectedIndex);\n    }\n    this.selectedIndex = foundSelectedIndex;\n  }\n  findSelectedFlowItemIndex(items) {\n    const selectedItem = items.slice(0).reverse().find((item) => !!item.selected);\n    return items.indexOf(selectedItem);\n  }\n  ensureSelectedFlowItemExists() {\n    const { items } = this;\n    const foundSelectedIndex = this.findSelectedFlowItemIndex(items);\n    if (foundSelectedIndex !== -1) {\n      return;\n    }\n    const lastItem = items[items.length - 1];\n    if (lastItem) {\n      lastItem.selected = true;\n    }\n  }\n  render() {\n    const { flowDirection } = this;\n    const frameDirectionClasses = {\n      [CSS.frame]: true,\n      [CSS.frameAdvancing]: flowDirection === \"advancing\",\n      [CSS.frameRetreating]: flowDirection === \"retreating\"\n    };\n    return html`<div class=${safeClassMap(frameDirectionClasses)} ${ref(this.frameRef)}><slot></slot></div>`;\n  }\n}\ncustomElement(\"calcite-flow\", Flow);\nexport {\n  Flow\n};\n"],
  "mappings": "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",
  "names": []
}
