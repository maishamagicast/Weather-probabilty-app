{
  "version": 3,
  "sources": ["../../@esri/calcite-components/dist/chunks/form.js"],
  "sourcesContent": ["/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\nv3.3.2 */\nimport { html, isServer } from \"lit\";\nimport { q as queryElementRoots, l as closestElementCrossShadowBoundary } from \"./dom.js\";\nconst componentsWithInputEvent = [\n  \"calcite-input\",\n  \"calcite-input-number\",\n  \"calcite-input-text\",\n  \"calcite-text-area\"\n];\nfunction getClearValidationEventName(componentTag) {\n  const componentTagCamelCase = componentTag.split(\"-\").map((part, index) => index === 0 ? part : `${part[0].toUpperCase()}${part.slice(1)}`).join(\"\");\n  const clearValidationEvent = `${componentTagCamelCase}${componentsWithInputEvent.includes(componentTag) ? \"Input\" : \"Change\"}`;\n  return clearValidationEvent;\n}\nconst hiddenFormInputSlotName = \"hidden-form-input\";\nfunction isCheckable(component) {\n  return \"checked\" in component;\n}\nconst onFormResetMap = /* @__PURE__ */ new WeakMap();\nconst formComponentSet = /* @__PURE__ */ new WeakSet();\nfunction hasRegisteredFormComponentParent(form, formComponentEl) {\n  const hasParentComponentWithFormIdSet = closestElementCrossShadowBoundary(formComponentEl.parentElement, \"[form]\");\n  if (hasParentComponentWithFormIdSet) {\n    return true;\n  }\n  const formComponentRegisterEventName = \"calciteInternalFormComponentRegister\";\n  let hasRegisteredFormComponentParent2 = false;\n  form.addEventListener(formComponentRegisterEventName, (event) => {\n    hasRegisteredFormComponentParent2 = event.composedPath().some((element) => formComponentSet.has(element));\n    event.stopPropagation();\n  }, { once: true });\n  formComponentEl.dispatchEvent(new CustomEvent(formComponentRegisterEventName, {\n    bubbles: true,\n    composed: true\n  }));\n  return hasRegisteredFormComponentParent2;\n}\nfunction displayValidationMessage(component, { status, message, icon }) {\n  if (\"status\" in component) {\n    component.status = status;\n  }\n  if (\"validationIcon\" in component && typeof component.validationIcon !== \"string\") {\n    component.validationIcon = icon;\n  }\n  if (\"validationMessage\" in component && !component.validationMessage) {\n    component.validationMessage = message;\n  }\n}\nfunction getValidationComponent(el) {\n  if (el.nodeName === \"CALCITE-RADIO-BUTTON\") {\n    return closestElementCrossShadowBoundary(el, \"calcite-radio-button-group\");\n  }\n  return el;\n}\nconst invalidEvent = new CustomEvent(\"calciteInvalid\", { bubbles: true, composed: true });\nfunction invalidHandler(event) {\n  const hiddenInput = event?.target;\n  const hiddenInputMessage = hiddenInput?.validationMessage;\n  const formComponent = getValidationComponent(hiddenInput?.parentElement);\n  if (!formComponent) {\n    return;\n  }\n  const componentTag = formComponent?.nodeName?.toLowerCase();\n  const componentTagParts = componentTag?.split(\"-\");\n  if (componentTagParts.length < 2 || componentTagParts[0] !== \"calcite\") {\n    return;\n  }\n  event?.preventDefault();\n  if (\"validity\" in formComponent) {\n    formComponent.validity = hiddenInput?.validity;\n  }\n  formComponent.dispatchEvent(invalidEvent);\n  displayValidationMessage(formComponent, {\n    message: hiddenInputMessage,\n    icon: true,\n    status: \"invalid\"\n  });\n  const clearValidationEvent = getClearValidationEventName(componentTag);\n  formComponent.addEventListener(clearValidationEvent, () => {\n    if (\"status\" in formComponent) {\n      formComponent.status = \"idle\";\n    }\n    if (\"validationIcon\" in formComponent && (formComponent.validationIcon === \"\" || formComponent.validationIcon === true)) {\n      formComponent.validationIcon = false;\n    }\n    if (\"validationMessage\" in formComponent && formComponent.validationMessage === hiddenInputMessage) {\n      formComponent.validationMessage = \"\";\n    }\n    if (\"validity\" in formComponent) {\n      formComponent.validity = hiddenInput?.validity;\n    }\n  }, { once: true });\n}\nfunction submitForm(component) {\n  const { formEl } = component;\n  if (!formEl) {\n    return false;\n  }\n  formEl.addEventListener(\"invalid\", invalidHandler, true);\n  formEl.requestSubmit();\n  formEl.removeEventListener(\"invalid\", invalidHandler, true);\n  requestAnimationFrame(() => {\n    const invalidEls = formEl.querySelectorAll(\"[status=invalid]\");\n    for (const el of invalidEls) {\n      if (el?.validationMessage) {\n        el?.setFocus();\n        break;\n      }\n    }\n  });\n  return true;\n}\nfunction resetForm(component) {\n  component.formEl?.reset();\n}\nfunction connectForm(component) {\n  const { el, value } = component;\n  const associatedForm = findAssociatedForm(component);\n  if (!associatedForm || hasRegisteredFormComponentParent(associatedForm, el)) {\n    return;\n  }\n  component.formEl = associatedForm;\n  component.defaultValue = value;\n  if (isCheckable(component)) {\n    component.defaultChecked = component.checked;\n  }\n  const boundOnFormReset = onFormReset.bind(component);\n  associatedForm.addEventListener(\"reset\", boundOnFormReset);\n  onFormResetMap.set(component.el, boundOnFormReset);\n  formComponentSet.add(el);\n}\nfunction findAssociatedForm(component) {\n  const { el, form } = component;\n  return form ? queryElementRoots(el, { id: form }) : closestElementCrossShadowBoundary(el, \"form\");\n}\nfunction onFormReset() {\n  if (\"status\" in this) {\n    this.status = \"idle\";\n  }\n  if (\"validationIcon\" in this) {\n    this.validationIcon = false;\n  }\n  if (\"validationMessage\" in this) {\n    this.validationMessage = \"\";\n  }\n  if (isCheckable(this)) {\n    this.checked = this.defaultChecked;\n    return;\n  }\n  this.value = this.defaultValue;\n  this.onFormReset?.();\n}\nfunction disconnectForm(component) {\n  const { el, formEl } = component;\n  if (!formEl) {\n    return;\n  }\n  const boundOnFormReset = onFormResetMap.get(el);\n  formEl.removeEventListener(\"reset\", boundOnFormReset);\n  onFormResetMap.delete(el);\n  component.formEl = null;\n  formComponentSet.delete(el);\n}\nfunction afterConnectDefaultValueSet(component, value) {\n  component.defaultValue = value;\n}\nconst internalHiddenInputInputEvent = \"calciteInternalHiddenInputInput\";\nconst hiddenInputInputHandler = (event) => {\n  event.target.dispatchEvent(new CustomEvent(internalHiddenInputInputEvent, { bubbles: true }));\n};\nconst removeHiddenInputChangeEventListener = (input) => input.removeEventListener(\"input\", hiddenInputInputHandler);\nfunction syncHiddenFormInput(component) {\n  const { el, formEl, name, value } = component;\n  const { ownerDocument } = el;\n  if (isServer) {\n    return;\n  }\n  const inputs = el.querySelectorAll(`input[slot=\"${hiddenFormInputSlotName}\"]`);\n  if (!formEl || !name) {\n    inputs.forEach((input) => {\n      removeHiddenInputChangeEventListener(input);\n      input.remove();\n    });\n    return;\n  }\n  const values = Array.isArray(value) ? value : [value];\n  const extra = [];\n  const seen = /* @__PURE__ */ new Set();\n  inputs.forEach((input) => {\n    const valueMatch = values.find((val) => (\n      /* intentional non-strict equality check */\n      val == input.value\n    ));\n    if (valueMatch != null) {\n      seen.add(valueMatch);\n      defaultSyncHiddenFormInput(component, input, valueMatch);\n    } else {\n      extra.push(input);\n    }\n  });\n  let docFrag;\n  values.forEach((value2) => {\n    if (seen.has(value2)) {\n      return;\n    }\n    let input = extra.pop();\n    if (!input) {\n      input = ownerDocument.createElement(\"input\");\n      input.ariaHidden = \"true\";\n      input.slot = hiddenFormInputSlotName;\n    }\n    if (!docFrag) {\n      docFrag = ownerDocument.createDocumentFragment();\n    }\n    docFrag.append(input);\n    input.addEventListener(\"input\", hiddenInputInputHandler);\n    defaultSyncHiddenFormInput(component, input, value2);\n  });\n  if (docFrag) {\n    el.append(docFrag);\n  }\n  extra.forEach((input) => {\n    removeHiddenInputChangeEventListener(input);\n    input.remove();\n  });\n}\nfunction defaultSyncHiddenFormInput(component, input, value) {\n  const { defaultValue, disabled, form, name, required } = component;\n  input.defaultValue = defaultValue;\n  input.disabled = disabled;\n  input.name = name;\n  input.required = required;\n  input.tabIndex = -1;\n  if (form) {\n    input.setAttribute(\"form\", form);\n  } else {\n    input.removeAttribute(\"form\");\n  }\n  if (isCheckable(component)) {\n    input.checked = component.checked;\n    input.defaultChecked = component.defaultChecked;\n    input.value = component.checked ? value || \"on\" : \"\";\n  } else {\n    input.value = value || \"\";\n  }\n  component.syncHiddenFormInput?.(input);\n  const validationComponent = getValidationComponent(component.el);\n  if (validationComponent && \"validity\" in validationComponent) {\n    for (const key in { ...input?.validity }) {\n      validationComponent.validity[key] = input.validity[key];\n    }\n  }\n}\nconst HiddenFormInputSlot = ({ component }) => {\n  syncHiddenFormInput(component);\n  return html`<slot name=${hiddenFormInputSlotName}></slot>`;\n};\nexport {\n  HiddenFormInputSlot as H,\n  afterConnectDefaultValueSet as a,\n  connectForm as c,\n  disconnectForm as d,\n  findAssociatedForm as f,\n  internalHiddenInputInputEvent as i,\n  resetForm as r,\n  submitForm as s\n};\n"],
  "mappings": "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",
  "names": []
}
