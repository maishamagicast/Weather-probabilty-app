{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/FoamRendering.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Gamma.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ScreenSpaceReflections.glsl.js", "../../@arcgis/core/views/3d/environment/Clouds.js", "../../@arcgis/core/views/3d/environment/CloudyWeather.js", "../../@arcgis/core/views/3d/environment/FoggyWeather.js", "../../@arcgis/core/views/3d/environment/RainyWeather.js", "../../@arcgis/core/views/3d/environment/SnowyWeather.js", "../../@arcgis/core/views/3d/environment/SunnyWeather.js", "../../@arcgis/core/views/3d/environment/weather.js", "../../@arcgis/core/views/3d/environment/CloudsParameters.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/LookupCloudsFromTextureArray.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DArrayBindUniform.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/CloudsParallaxShading.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../shaderModules/glsl.js\";function t(t){t.code.add(o`float normals2FoamIntensity(vec3 n, float waveStrength){\nfloat normalizationFactor =  max(0.015, waveStrength);\nreturn max((n.x + n.y)*0.3303545/normalizationFactor + 0.3303545, 0.0);\n}`)}function n(t){t.code.add(o`vec3 foamIntensity2FoamColor(float foamIntensityExternal, float foamPixelIntensity, vec3 skyZenitColor, float dayMod){\nreturn foamIntensityExternal * (0.075 * skyZenitColor * pow(foamPixelIntensity, 4.) +  50.* pow(foamPixelIntensity, 23.0)) * dayMod;\n}`)}export{n as FoamColor,t as FoamIntensity};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{colorGamma as o}from\"../../../../../../colorUtils.js\";import{glsl as r}from\"../../shaderModules/glsl.js\";function e(e){e.code.add(r`\n    const float GAMMA = ${r.float(o)};\n    const float INV_GAMMA = ${r.float(1/o)};\n\n    vec4 delinearizeGamma(vec4 color) {\n      return vec4(pow(color.rgb, vec3(INV_GAMMA)), color.a);\n    }\n\n    vec3 linearizeGamma(vec3 color) {\n      return pow(color, vec3(GAMMA));\n    }\n  `)}export{e as Gamma};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{ReadDepth as e}from\"../output/ReadDepth.glsl.js\";import{Float2BindUniform as t}from\"../../shaderModules/Float2BindUniform.js\";import{FloatBindUniform as o}from\"../../shaderModules/FloatBindUniform.js\";import{glsl as r}from\"../../shaderModules/glsl.js\";import{Matrix4BindUniform as i}from\"../../shaderModules/Matrix4BindUniform.js\";import{Texture2DBindUniform as a}from\"../../shaderModules/Texture2DBindUniform.js\";function d(d,n){if(!n.screenSpaceReflections)return;const c=d.fragment;c.include(e),c.uniforms.add(new t(\"nearFar\",(e=>e.camera.nearFar)),new a(\"depthMap\",(e=>e.depth?.attachment)),new i(\"proj\",(e=>e.camera.projectionMatrix)),new o(\"invResolutionHeight\",(e=>1/e.camera.height)),new i(\"reprojectionMatrix\",(e=>e.ssr.reprojectionMatrix))).code.add(r`\n  vec2 reprojectionCoordinate(vec3 projectionCoordinate)\n  {\n    vec4 zw = proj * vec4(0.0, 0.0, -projectionCoordinate.z, 1.0);\n    vec4 reprojectedCoord = reprojectionMatrix * vec4(zw.w * (projectionCoordinate.xy * 2.0 - 1.0), zw.z, zw.w);\n    reprojectedCoord.xy /= reprojectedCoord.w;\n    return reprojectedCoord.xy * 0.5 + 0.5;\n  }\n\n  const int maxSteps = ${n.highStepCount?\"150\":\"75\"};\n\n  vec4 applyProjectionMat(mat4 projectionMat, vec3 x)\n  {\n    vec4 projectedCoord =  projectionMat * vec4(x, 1.0);\n    projectedCoord.xy /= projectedCoord.w;\n    projectedCoord.xy = projectedCoord.xy*0.5 + 0.5;\n    return projectedCoord;\n  }\n\n  vec3 screenSpaceIntersection(vec3 dir, vec3 startPosition, vec3 viewDir, vec3 normal)\n  {\n    vec3 viewPos = startPosition;\n    vec3 viewPosEnd = startPosition;\n\n    // Project the start position to the screen\n    vec4 projectedCoordStart = applyProjectionMat(proj, viewPos);\n    vec3  Q0 = viewPos / projectedCoordStart.w; // homogeneous camera space\n    float k0 = 1.0/ projectedCoordStart.w;\n\n    // advance the position in the direction of the reflection\n    viewPos += dir;\n\n    vec4 projectedCoordVanishingPoint = applyProjectionMat(proj, dir);\n\n    // Project the advanced position to the screen\n    vec4 projectedCoordEnd = applyProjectionMat(proj, viewPos);\n    vec3  Q1 = viewPos / projectedCoordEnd.w; // homogeneous camera space\n    float k1 = 1.0/ projectedCoordEnd.w;\n\n    // calculate the reflection direction in the screen space\n    vec2 projectedCoordDir = (projectedCoordEnd.xy - projectedCoordStart.xy);\n    vec2 projectedCoordDistVanishingPoint = (projectedCoordVanishingPoint.xy - projectedCoordStart.xy);\n\n    float yMod = min(abs(projectedCoordDistVanishingPoint.y), 1.0);\n\n    float projectedCoordDirLength = length(projectedCoordDir);\n    float maxSt = float(maxSteps);\n\n    // normalize the projection direction depending on maximum steps\n    // this determines how blocky the reflection looks\n    vec2 dP = yMod * (projectedCoordDir)/(maxSt * projectedCoordDirLength);\n\n    // Normalize the homogeneous camera space coordinates\n    vec3  dQ = yMod * (Q1 - Q0)/(maxSt * projectedCoordDirLength);\n    float dk = yMod * (k1 - k0)/(maxSt * projectedCoordDirLength);\n\n    // initialize the variables for ray marching\n    vec2 P = projectedCoordStart.xy;\n    vec3 Q = Q0;\n    float k = k0;\n    float rayStartZ = -startPosition.z; // estimated ray start depth value\n    float rayEndZ = -startPosition.z;   // estimated ray end depth value\n    float prevEstimateZ = -startPosition.z;\n    float rayDiffZ = 0.0;\n    float dDepth;\n    float depth;\n    float rayDiffZOld = 0.0;\n\n    // early outs\n    if (dot(normal, dir) < 0.0 || dot(-viewDir, normal) < 0.0)\n      return vec3(P, 0.0);\n    float dDepthBefore = 0.0;\n\n    for(int i = 0; i < maxSteps-1; i++)\n    {\n      depth = -linearDepthFromTexture(depthMap, P); // get linear depth from the depth buffer\n\n      // estimate depth of the marching ray\n      rayStartZ = prevEstimateZ;\n      dDepth = -rayStartZ - depth;\n      rayEndZ = (dQ.z * 0.5 + Q.z)/ ((dk * 0.5 + k));\n      rayDiffZ = rayEndZ- rayStartZ;\n      prevEstimateZ = rayEndZ;\n\n      if(-rayEndZ > nearFar[1] || -rayEndZ < nearFar[0] || P.y < 0.0  || P.y > 1.0 )\n      {\n        return vec3(P, 0.);\n      }\n\n      // If we detect a hit - return the intersection point, two conditions:\n      //  - dDepth > 0.0 - sampled point depth is in front of estimated depth\n      //  - if difference between dDepth and rayDiffZOld is not too large\n      //  - if difference between dDepth and 0.025/abs(k) is not too large\n      //  - if the sampled depth is not behind far plane or in front of near plane\n\n      if((dDepth) < 0.025/abs(k) + abs(rayDiffZ) && dDepth > 0.0 && depth > nearFar[0] && depth < nearFar[1] && abs(P.y - projectedCoordStart.y) > invResolutionHeight)\n      {\n        float weight = dDepth / (dDepth - dDepthBefore);\n        vec2 Pf = mix(P - dP, P, 1.0 - weight);\n        if (abs(Pf.y - projectedCoordStart.y) > invResolutionHeight) {\n          return vec3(Pf, depth);\n        }\n        else {\n          return vec3(P, depth);\n        }\n      }\n\n      // continue with ray marching\n      P = clamp(P + dP, vec2(0.0), vec2(0.999));\n      Q.z += dQ.z;\n      k += dk;\n      rayDiffZOld = rayDiffZ;\n      dDepthBefore = dDepth;\n    }\n    return vec3(P, 0.0);\n  }\n  `)}export{d as ScreenSpaceReflections};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nvar n,e;function d(n){return null!=n&&!n.running}!function(n){n[n.Idle=0]=\"Idle\",n[n.Rendering=1]=\"Rendering\",n[n.Ready=2]=\"Ready\",n[n.Fading=3]=\"Fading\"}(n||(n={})),function(n){n[n.RG=0]=\"RG\",n[n.BA=1]=\"BA\",n[n.COUNT=2]=\"COUNT\"}(e||(e={}));export{e as CloudsTextureChannels,n as CubeMapState,d as ensureClouds};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/JSONSupport.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{enumeration as s}from\"../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";var c;let p=c=class extends r{constructor(o){super(o),this.type=\"cloudy\",this.cloudCover=.5}clone(){return new c({cloudCover:this.cloudCover})}};o([s({cloudy:\"cloudy\"}),e({json:{write:{isRequired:!0}}})],p.prototype,\"type\",void 0),o([e({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p.prototype,\"cloudCover\",void 0),p=c=o([t(\"esri.views.3d.environment.CloudyWeather\")],p);const i=p;export{i as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/JSONSupport.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{enumeration as t}from\"../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";var p;let c=p=class extends r{constructor(o){super(o),this.type=\"foggy\",this.fogStrength=.5}clone(){return new p({fogStrength:this.fogStrength})}};o([t({foggy:\"foggy\"}),e({json:{write:{isRequired:!0}}})],c.prototype,\"type\",void 0),o([e({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,\"fogStrength\",void 0),c=p=o([s(\"esri.views.3d.environment.FoggyWeather\")],c);const i=c;export{i as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/JSONSupport.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{enumeration as t}from\"../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";var s;let p=s=class extends r{constructor(o){super(o),this.type=\"rainy\",this.cloudCover=.5,this.precipitation=.5}clone(){return new s({cloudCover:this.cloudCover,precipitation:this.precipitation})}};o([t({rainy:\"rainy\"}),e({json:{write:{isRequired:!0}}})],p.prototype,\"type\",void 0),o([e({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p.prototype,\"cloudCover\",void 0),o([e({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p.prototype,\"precipitation\",void 0),p=s=o([i(\"esri.views.3d.environment.RainyWeather\")],p);const n=p;export{n as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/JSONSupport.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{enumeration as t}from\"../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";var i;let p=i=class extends r{constructor(o){super(o),this.type=\"snowy\",this.cloudCover=.5,this.precipitation=.5,this.snowCover=\"disabled\"}clone(){return new i({cloudCover:this.cloudCover,precipitation:this.precipitation,snowCover:this.snowCover})}};o([t({snowy:\"snowy\"}),e({json:{write:{isRequired:!0}}})],p.prototype,\"type\",void 0),o([e({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p.prototype,\"cloudCover\",void 0),o([e({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p.prototype,\"precipitation\",void 0),o([e({type:[\"enabled\",\"disabled\"],nonNullable:!0,json:{write:!0}})],p.prototype,\"snowCover\",void 0),p=i=o([s(\"esri.views.3d.environment.SnowyWeather\")],p);const n=p;export{n as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/JSONSupport.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{enumeration as s}from\"../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";var c;let n=c=class extends r{constructor(o){super(o),this.type=\"sunny\",this.cloudCover=.5}clone(){return new c({cloudCover:this.cloudCover})}};o([s({sunny:\"sunny\"}),e({json:{write:{isRequired:!0}}})],n.prototype,\"type\",void 0),o([e({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],n.prototype,\"cloudCover\",void 0),n=c=o([t(\"esri.views.3d.environment.SunnyWeather\")],n);const p=n;export{p as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"./CloudyWeather.js\";import r from\"./FoggyWeather.js\";import o from\"./RainyWeather.js\";import t from\"./SnowyWeather.js\";import y from\"./SunnyWeather.js\";const n={key:\"type\",base:y,typeMap:{sunny:y,cloudy:e,rainy:o,snowy:t,foggy:r}},a=Object.keys(n.typeMap);function s(e,r){return!!a.includes(e)||(r.error(`\"${e}\" is not a valid weather type`),!1)}const p=1e4,i=1e5;export{i as cloudsHeight,p as heightLimit,s as validateWeatherType,n as weatherTypes,a as weatherTypesArray};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{neverReached as a}from\"../../../core/compilerUtils.js\";import{clamp as t}from\"../../../core/mathUtils.js\";import{signal as e}from\"../../../core/signal.js\";import{rotate as s}from\"../../../core/libs/gl-matrix-2/math/mat4.js\";import{IDENTITY as i,create as r}from\"../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{k as h,n as o,g as n,c,l as d,d as l}from\"../../../chunks/vec32.js\";import{create as _,fromValues as u}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as F,fromPoints as f,axis as p}from\"../../../geometry/support/axisAngleDegrees.js\";import{earth as S}from\"../../../geometry/support/Ellipsoid.js\";import{CloudsTextureChannels as m,ensureClouds as E,CubeMapState as D}from\"./Clouds.js\";import{heightLimit as P}from\"./weather.js\";class x{constructor(){this.startTime=0,this._data=e(null),this.coverage=0,this.absorption=0,this._readChannels=m.RG,this.parallax=new O,this.parallaxNew=new O,this._anchorPoint=_(),this._fadeState=e(A.HIDE),this._fadeFactor=e(1)}get data(){return this._data.value}set data(a){this._data.value=a}get readChannels(){return this._readChannels}get fadeState(){return this._fadeState.value}get fadeFactor(){return this._fadeFactor.value}get opacity(){switch(this.fadeState){case A.HIDE:return 0;case A.FADE_OUT:return 1-this.fadeFactor;case A.FADE_IN:return this.fadeFactor;case A.SHOW:case A.CROSS_FADE:return 1}}fade(a,e,s){this.isFading&&this.fadeFactor<1&&(this._fadeFactor.value=s?t((e-this.startTime)/(H*s),0,1):1,1===this.fadeFactor&&this._endFade()),this._evaluateState(a,e),this._updateParallax(a)}_evaluateState(a,t){const e=a.relativeElevation,s=this._updateAnchorPoint(a);(e>1.7*P||e<-1e4||s>I)&&this.opacity>0?this._startFade(A.HIDE,t):this.isFading||(e>P||e<-.35*P||s>w*I?this.opacity>0&&this._startFade(A.FADE_OUT,t):E(this.data)&&(0===this.opacity?this._startFade(A.FADE_IN,t):this.data.state===D.Ready&&(this.fadeState===A.SHOW?this._startFade(A.CROSS_FADE,t):this._startFade(A.SHOW,t))))}_updateParallax(a){const t=h(a.eye);this.parallax.radiusCurvatureCorrection=.84*Math.sqrt(Math.max(t-S.radius*S.radius,0))/Math.sqrt(t),f(v,this.parallax.anchorPoint,C),s(this.parallax.transform,i,C[3],p(C)),f(v,this.parallaxNew.anchorPoint,C),s(this.parallaxNew.transform,i,C[3],p(C))}_updateAnchorPoint(a){return o(this._anchorPoint,a.eye),n(this._anchorPoint,this._anchorPoint,S.radius),this.fadeState===A.HIDE&&this.data?.state===D.Ready?(c(this.parallax.anchorPoint,this._anchorPoint),0):d(l(g,this.parallax.anchorPoint,this._anchorPoint))}requestFade(){this._fadeFactor.value=0}_startFade(a,t){switch(this._fadeState.value=a,this.startTime=t,a){case A.CROSS_FADE:this.requestFade(),this._switchReadChannels(),c(this.parallaxNew.anchorPoint,this._anchorPoint);break;case A.FADE_IN:this.requestFade(),this._switchReadChannels(),c(this.parallax.anchorPoint,this._anchorPoint),c(this.parallaxNew.anchorPoint,this._anchorPoint);break;case A.FADE_OUT:this.requestFade();break;case A.SHOW:this._switchReadChannels(),c(this.parallax.anchorPoint,this._anchorPoint),c(this.parallaxNew.anchorPoint,this._anchorPoint),this._endFade();break;case A.HIDE:this._endFade()}}_endFade(){switch(this._fadeFactor.value=1,this.data&&this.data.state!==D.Ready&&(this.data.state=D.Idle),this.fadeState){case A.CROSS_FADE:c(this.parallax.anchorPoint,this.parallaxNew.anchorPoint),this._fadeState.value=A.SHOW;break;case A.FADE_IN:this._fadeState.value=A.SHOW;break;case A.FADE_OUT:this._fadeState.value=A.HIDE;break;case A.SHOW:case A.HIDE:break;default:a(this.fadeState)}}_switchReadChannels(){this.data?.state===D.Ready&&(this._readChannels=1-this._readChannels,this.data.state=D.Fading)}get isFading(){return this.fadeState===A.FADE_OUT||this.fadeState===A.FADE_IN||this.fadeState===A.CROSS_FADE}}var A;!function(a){a[a.HIDE=0]=\"HIDE\",a[a.FADE_IN=1]=\"FADE_IN\",a[a.SHOW=2]=\"SHOW\",a[a.CROSS_FADE=3]=\"CROSS_FADE\",a[a.FADE_OUT=4]=\"FADE_OUT\"}(A||(A={}));class O{constructor(){this.anchorPoint=_(),this.radiusCurvatureCorrection=0,this.transform=r()}}const v=u(0,0,1),C=F(),g=_(),H=1.25,w=.5,I=2e5;export{x as CloudsParameters,A as FadeState};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{FloatBindUniform as r}from\"../../shaderModules/FloatBindUniform.js\";import{glsl as a}from\"../../shaderModules/glsl.js\";function e(e){e.fragment.uniforms.add(new r(\"cloudAbsorption\",(r=>r.clouds.absorption)),new r(\"cloudCoverage\",(r=>r.clouds.coverage))).code.add(a`vec4 lookupCloudsFromTextureArray(sampler2DArray cubeMap, vec3 rayDir) {\nint faceIndex;\nvec2 uv;\nif(rayDir.z <= 0.0) {\nfloat hazeFactor = smoothstep(-0.01, mix(0.0, 0.075, cloudCoverage), abs(dot(rayDir, vec3(0, 0, 1))));\nfloat shading = clamp(1.0 - cloudAbsorption, 0.6, 1.0) * (1.0 - hazeFactor);\nfloat totalTransmittance = hazeFactor;\nreturn vec4(shading, totalTransmittance, shading, totalTransmittance);\n}\nif (abs(rayDir.x) >= abs(rayDir.y) && abs(rayDir.x) >= abs(rayDir.z)) {\nif(rayDir.x > 0.0) {\nfaceIndex = 0;\nuv = rayDir.yz / rayDir.x;\nuv = vec2(-uv.x, uv.y);\n} else {\nfaceIndex = 1;\nuv = rayDir.yz / rayDir.x;\nuv = vec2(-uv.x, -uv.y);\n}\n} else if (abs(rayDir.y) >= abs(rayDir.x) && abs(rayDir.y) >= abs(rayDir.z)) {\nif(rayDir.y > 0.0) {\nfaceIndex = 2;\nuv = rayDir.xz / rayDir.y;\n} else {\nfaceIndex = 3;\nuv = rayDir.xz / rayDir.y;\nuv = vec2(uv.x, -uv.y);\n}\n} else {\nif(rayDir.y < 0.0) {\nfaceIndex = 4;\nuv = rayDir.xy / rayDir.z;\nuv = vec2(uv.x, -uv.y);\n} else {\nfaceIndex = 5;\nuv = rayDir.xy / rayDir.z;\nuv = vec2(uv.x, -uv.y);\n}\n}\nuv = 0.5 * (uv + 1.0);\nif(faceIndex != 5) {\nuv.y = uv.y - 0.5;\n}\nuv.y = uv.y * 2.0;\nvec4 s = texture(cubeMap, vec3(uv, float(faceIndex)));\nreturn s;\n}`)}export{e as LookupCloudsFromTextureArray};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{BindType as r}from\"../../../../webgl/BindType.js\";import{Uniform as e}from\"../../../../webgl/Uniform.js\";class o extends e{constructor(e,o){super(e,\"sampler2DArray\",r.Bind,((r,s)=>r.bindTexture(e,o(s))))}}export{o as Texture2DArrayBindUniform};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{fromValues as o}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{earth as t}from\"../../../../../../geometry/support/Ellipsoid.js\";import{CloudsTextureChannels as e}from\"../../../../environment/Clouds.js\";import{FadeState as r}from\"../../../../environment/CloudsParameters.js\";import{cloudsHeight as a}from\"../../../../environment/weather.js\";import{addMainLightDirection as i,addMainLightIntensity as d}from\"../shading/MainLighting.glsl.js\";import{LookupCloudsFromTextureArray as c}from\"./LookupCloudsFromTextureArray.glsl.js\";import{BooleanBindUniform as n}from\"../../shaderModules/BooleanBindUniform.js\";import{Float3BindUniform as l}from\"../../shaderModules/Float3BindUniform.js\";import{FloatBindUniform as s}from\"../../shaderModules/FloatBindUniform.js\";import{glsl as u}from\"../../shaderModules/glsl.js\";import{Matrix4BindUniform as m}from\"../../shaderModules/Matrix4BindUniform.js\";import{Texture2DArrayBindUniform as h}from\"../../shaderModules/Texture2DArrayBindUniform.js\";function C(t){const a=t.fragment;a.constants.add(\"radiusCloudsSquared\",\"float\",v).code.add(u`vec3 intersectWithCloudLayer(vec3 dir, vec3 cameraPosition, vec3 spherePos) {\nfloat B = 2.0 * dot(cameraPosition, dir);\nfloat C = dot(cameraPosition, cameraPosition) - radiusCloudsSquared;\nfloat det = B * B - 4.0 * C;\nfloat pointIntDist = max(0.0, 0.5 *(-B + sqrt(det)));\nreturn (cameraPosition + dir * pointIntDist) - spherePos;\n}`),a.uniforms.add(new s(\"radiusCurvatureCorrection\",(({clouds:o})=>o.parallax.radiusCurvatureCorrection))).code.add(u`vec3 correctForPlanetCurvature(vec3 dir) {\ndir.z = dir.z * (1.0 - radiusCurvatureCorrection) + radiusCurvatureCorrection;\nreturn dir;\n}`),a.code.add(u`vec3 rotateDirectionToAnchorPoint(mat4 rotMat, vec3 inVec) {\nreturn (rotMat * vec4(inVec, 0.0)).xyz;\n}`),i(a),d(a);const C=o(.28,.175,.035);a.constants.add(\"RIM_COLOR\",\"vec3\",C);const f=.3,p=140,g=.2,w=10,P=.3;a.code.add(u`\n    vec3 calculateCloudColor(vec3 cameraPosition, vec3 worldSpaceRay, vec4 clouds) {\n      float upDotLight = dot(cameraPosition, mainLightDirection);\n      float dirDotLight = max(dot(worldSpaceRay, mainLightDirection), 0.0);\n      float sunsetTransition = clamp(pow(max(upDotLight, 0.0), ${u.float(f)}), 0.0, 1.0);\n\n      // Base color of the clouds that depends on lighting of the sun and sky\n      vec3 ambientLight = calculateAmbientIrradiance(cameraPosition,  0.0);\n      vec3 combinedLight = clamp((mainLightIntensity + ambientLight )/PI, vec3(0.0), vec3(1.0));\n      vec3 baseCloudColor = pow(combinedLight * pow(clouds.xyz, vec3(GAMMA)), vec3(INV_GAMMA));\n\n      // Rim light around the edge of the clouds simulating scattering of the direct lun light\n      float scatteringMod = max(clouds.a < 0.5 ? clouds.a / 0.5 : - clouds.a / 0.5 + 2.0, 0.0);\n      float rimLightIntensity = 0.5 + 0.5 * pow(max(upDotLight, 0.0), 0.35);\n      vec3 directSunScattering = RIM_COLOR * rimLightIntensity * (pow(dirDotLight, ${u.float(p)})) * scatteringMod;\n\n      // Brighten the clouds around the sun at the sunsets\n      float additionalLight = ${u.float(g)} * pow(dirDotLight, ${u.float(w)}) * (1. - pow(sunsetTransition, ${u.float(P)})) ;\n\n      return vec3(baseCloudColor * (1.0 + additionalLight) + directSunScattering);\n    }\n  `),t.include(c),a.uniforms.add(new n(\"readChannelsRG\",(o=>o.clouds.readChannels===e.RG)),new h(\"cubeMap\",(o=>o.clouds.data?.cubeMap?.colorTexture))).code.add(u`vec4 sampleCloud(vec3 rayDir, bool readOtherChannel) {\nvec4 s = lookupCloudsFromTextureArray(cubeMap, rayDir);\nbool readRG = readChannelsRG ^^ readOtherChannel;\ns = readRG ? vec4(vec3(s.r), s.g) : vec4(vec3(s.b), s.a);\nreturn length(s) == 0.0 ? vec4(s.rgb, 1.0) : s;\n}`),a.uniforms.add(new l(\"anchorPoint\",(o=>o.clouds.parallax.anchorPoint)),new l(\"anchorPointNew\",(o=>o.clouds.parallaxNew.anchorPoint)),new m(\"rotationClouds\",(o=>o.clouds.parallax.transform)),new m(\"rotationCloudsNew\",(o=>o.clouds.parallaxNew.transform)),new s(\"cloudsOpacity\",(o=>o.clouds.opacity)),new s(\"fadeFactor\",(o=>o.clouds.fadeFactor)),new n(\"crossFade\",(o=>o.clouds.fadeState===r.CROSS_FADE))).code.add(u`vec4 renderClouds(vec3 worldRay, vec3 cameraPosition) {\nvec3 intersectionPoint = intersectWithCloudLayer(worldRay, cameraPosition, anchorPoint);\nvec3 worldRayRotated = rotateDirectionToAnchorPoint(rotationClouds, normalize(intersectionPoint));\nvec3 worldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);\nvec4 cloudData = sampleCloud(worldRayRotatedCorrected, crossFade);\nvec3 cameraPositionN = normalize(cameraPosition);\nvec4 cloudColor = vec4(calculateCloudColor(cameraPositionN, worldRay, cloudData), cloudData.a);\nif(crossFade) {\nintersectionPoint = intersectWithCloudLayer(worldRay, cameraPosition, anchorPointNew);\nworldRayRotated = rotateDirectionToAnchorPoint(rotationCloudsNew, normalize(intersectionPoint));\nworldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);\ncloudData = sampleCloud(worldRayRotatedCorrected, false);\nvec4 cloudColorNew = vec4(calculateCloudColor(cameraPositionN, worldRay, cloudData), cloudData.a);\ncloudColor = mix(cloudColor, cloudColorNew, fadeFactor);\n}\nfloat totalTransmittance = length(cloudColor.rgb) == 0.0 ?\n1.0 :\nclamp(cloudColor.a * cloudsOpacity + (1.0 - cloudsOpacity), 0.0 , 1.0);\nreturn vec4(cloudColor.rgb, totalTransmittance);\n}`)}const v=(t.radius+a)**2;export{C as CloudsParallaxShading};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{FoamColor as e}from\"./FoamRendering.glsl.js\";import{Gamma as o}from\"./Gamma.glsl.js\";import{PhysicallyBasedRenderingWater as t}from\"./PhysicallyBasedRendering.glsl.js\";import{distanceFadeStart as r,distanceFadeEnd as i}from\"./ScreenSpaceConstants.js\";import{ScreenSpaceReflections as n}from\"./ScreenSpaceReflections.glsl.js\";import{CloudsParallaxShading as a}from\"../util/CloudsParallaxShading.glsl.js\";import{FloatBindUniform as l}from\"../../shaderModules/FloatBindUniform.js\";import{glsl as d}from\"../../shaderModules/glsl.js\";import{Matrix4BindUniform as c}from\"../../shaderModules/Matrix4BindUniform.js\";import{Texture2DBindUniform as s}from\"../../shaderModules/Texture2DBindUniform.js\";import{ToneMapping as f}from\"../../../shaders/ToneMapping.glsl.js\";function m(m,v){const u=m.fragment;u.include(t,v),u.include(o),u.include(e),v.cloudReflections&&m.include(a),m.include(n,v),u.include(f,v),u.constants.add(\"fresnelSky\",\"vec3\",[.02,1,15]),u.constants.add(\"fresnelMaterial\",\"vec2\",[.02,.1]),u.constants.add(\"roughness\",\"float\",.015),u.constants.add(\"foamIntensityExternal\",\"float\",1.7),u.constants.add(\"ssrIntensity\",\"float\",.65),u.constants.add(\"ssrHeightFadeStart\",\"float\",r),u.constants.add(\"ssrHeightFadeEnd\",\"float\",i),u.constants.add(\"waterDiffusion\",\"float\",.92),u.constants.add(\"waterSeaColorMod\",\"float\",.8),u.constants.add(\"correctionViewingPowerFactor\",\"float\",.4),u.constants.add(\"skyZenitColor\",\"vec3\",[.52,.68,.9]),u.constants.add(\"skyColor\",\"vec3\",[.67,.79,.9]),u.constants.add(\"cloudFresnelModifier\",\"vec2\",[1.2,.01]),u.code.add(d`PBRShadingWater shadingInfo;\nvec3 getSkyGradientColor(in float cosTheta, in vec3 horizon, in vec3 zenit) {\nfloat exponent = pow((1.0 - cosTheta), fresnelSky[2]);\nreturn mix(zenit, horizon, exponent);\n}`),u.uniforms.add(new l(\"lightingSpecularStrength\",(e=>e.lighting.mainLight.specularStrength)),new l(\"lightingEnvironmentStrength\",(e=>e.lighting.mainLight.environmentStrength))),u.code.add(d`vec3 getSeaColor(in vec3 n, in vec3 v, in vec3 l, vec3 color, in vec3 lightIntensity, in vec3 localUp, in float shadow, float foamIntensity, vec3 viewPosition, vec3 position) {\nfloat reflectionHit = 0.0;\nfloat reflectionHitDiffused = 0.0;\nvec3 seaWaterColor = linearizeGamma(color);\nvec3 h = normalize(l + v);\nshadingInfo.NdotV = clamp(dot(n, v), 0.001, 1.0);\nshadingInfo.VdotN = clamp(dot(v, n), 0.001, 1.0);\nshadingInfo.NdotH = clamp(dot(n, h), 0.0, 1.0);\nshadingInfo.VdotH = clamp(dot(v, h), 0.0, 1.0);\nshadingInfo.LdotH = clamp(dot(l, h), 0.0, 1.0);\nfloat upDotV = max(dot(localUp,v), 0.0);\nvec3 skyHorizon = linearizeGamma(skyColor);\nvec3 skyZenit = linearizeGamma(skyZenitColor);\nvec3 skyColor = getSkyGradientColor(upDotV, skyHorizon, skyZenit );\nfloat upDotL = max(dot(localUp,l),0.0);\nfloat daytimeMod = 0.1 + upDotL * 0.9;\nskyColor *= daytimeMod;\nfloat shadowModifier = clamp(shadow, 0.8, 1.0);\nvec3 fresnelModifier = fresnelReflection(shadingInfo.VdotN, vec3(fresnelSky[0]), fresnelSky[1]);\nvec3 reflSky = lightingEnvironmentStrength * fresnelModifier * skyColor * shadowModifier;\nvec3 reflSea = seaWaterColor * mix(skyColor, upDotL * lightIntensity * LIGHT_NORMALIZATION, 2.0 / 3.0) * shadowModifier;\nvec3 specular = vec3(0.0);\nif(upDotV > 0.0 && upDotL > 0.0) {\nvec3 specularSun = brdfSpecularWater(shadingInfo, roughness, vec3(fresnelMaterial[0]), fresnelMaterial[1]);\nvec3 incidentLight = lightIntensity * LIGHT_NORMALIZATION * shadow;\nfloat NdotL = clamp(dot(n, l), 0.0, 1.0);\nspecular = lightingSpecularStrength * NdotL * incidentLight * specularSun;\n}\nvec3 foam = vec3(0.0);\nif(upDotV > 0.0) {\nfoam = foamIntensity2FoamColor(foamIntensityExternal, foamIntensity, skyZenitColor, daytimeMod);\n}\nfloat correctionViewingFactor = pow(max(dot(v, localUp), 0.0), correctionViewingPowerFactor);\nvec3 normalCorrectedClouds = mix(localUp, n, correctionViewingFactor);\nvec3 reflectedWorld = normalize(reflect(-v, normalCorrectedClouds));`),v.cloudReflections&&u.uniforms.add(new l(\"cloudsOpacity\",(e=>e.clouds.opacity))).code.add(d`vec4 cloudsColor = renderClouds(reflectedWorld, position);\ncloudsColor.a = 1.0 - cloudsColor.a;\ncloudsColor = pow(cloudsColor, vec4(GAMMA));\ncloudsColor *= clamp(fresnelModifier.y * cloudFresnelModifier[0] - cloudFresnelModifier[1], 0.0, 1.0) * cloudsOpacity;`),v.screenSpaceReflections?u.uniforms.add(new c(\"view\",(e=>e.camera.viewMatrix)),new s(\"lastFrameColorTexture\",(e=>e.ssr.lastFrameColor?.getTexture())),new l(\"fadeFactorSSR\",(e=>e.ssr.fadeFactor))).code.add(d`vec3 viewDir = normalize(viewPosition);\nvec4 viewNormalVectorCoordinate = view * vec4(n, 0.0);\nvec3 viewNormal = normalize(viewNormalVectorCoordinate.xyz);\nvec4 viewUp = view * vec4(localUp, 0.0);\nvec3 viewNormalCorrectedSSR = mix(viewUp.xyz, viewNormal, correctionViewingFactor);\nvec3 reflected = normalize(reflect(viewDir, viewNormalCorrectedSSR));\nvec3 hitCoordinate = screenSpaceIntersection(reflected, viewPosition, viewDir, viewUp.xyz);\nvec3 reflectedColor = vec3(0.0);\nif (hitCoordinate.z > 0.0)\n{\nvec2 reprojectedCoordinate = reprojectionCoordinate(hitCoordinate);\nvec2 dCoords = smoothstep(0.3, 0.6, abs(vec2(0.5, 0.5) - hitCoordinate.xy));\nfloat heightMod = smoothstep(ssrHeightFadeEnd, ssrHeightFadeStart, -viewPosition.z);\nreflectionHit = clamp(1.0 - (1.3 * dCoords.y), 0.0, 1.0) * heightMod * fadeFactorSSR;\nreflectionHitDiffused = waterDiffusion * reflectionHit;\nreflectedColor = linearizeGamma(texture(lastFrameColorTexture, reprojectedCoordinate).xyz) *\nreflectionHitDiffused * fresnelModifier.y * ssrIntensity;\n}\nfloat seaColorMod =  mix(waterSeaColorMod, waterSeaColorMod * 0.5, reflectionHitDiffused);\nvec3 waterRenderedColor = tonemapACES((1.0 - reflectionHitDiffused) * reflSky + reflectedColor +\nreflSea * seaColorMod + specular + foam);`):u.code.add(d`vec3 waterRenderedColor = tonemapACES(reflSky + reflSea * waterSeaColorMod + specular + foam);`),v.cloudReflections?v.screenSpaceReflections?u.code.add(d`return waterRenderedColor * (1.0 - (1.0 - reflectionHit) * cloudsColor.a) + (1.0 - reflectionHit) * cloudsColor.xyz;\n}`):u.code.add(d`return waterRenderedColor * (1.0 - cloudsColor.a) + cloudsColor.xyz;\n}`):u.code.add(d`return waterRenderedColor;\n}`)}export{m as Water};\n"],
  "mappings": "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",
  "names": ["t", "n", "e", "n", "d", "n", "c", "e", "o", "t", "n", "e", "d", "c", "p", "o", "r", "i", "p", "c", "o", "r", "i", "s", "p", "o", "r", "n", "i", "p", "o", "r", "n", "c", "n", "o", "r", "p", "n", "p", "i", "a", "p", "i", "r", "e", "n", "A", "a", "s", "t", "p", "w", "d", "v", "g", "j", "e", "r", "n", "o", "e", "a", "r", "s", "C", "t", "a", "v", "n", "e", "o", "r", "p", "g", "w", "A", "i", "m", "v", "r", "e", "n", "C", "d", "o", "t"]
}
