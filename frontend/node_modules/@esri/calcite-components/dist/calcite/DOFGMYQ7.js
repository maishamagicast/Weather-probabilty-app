/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.2 */
import{b as S,c as F}from"./MSG3TDYX.js";import{b as f,f as z,g as N,k as w,l as U}from"./Z4WYDSRI.js";import{a as C}from"./MHKDIXTA.js";import{b as P}from"./KFA3JWJG.js";import{c as $}from"./ZXMLNJSJ.js";import{o as y,q as O}from"./5IGT3AAH.js";var B=5;function x({locale:r,numberingSystem:e,includeSeconds:t=!0,fractionalSecondDigits:i,hour12:n}){let o={hour:"2-digit",minute:"2-digit",timeZone:"UTC",numberingSystem:N(e)};return typeof n=="boolean"&&(o.hour12=n),t&&(o.second="2-digit",i&&(o.fractionalSecondDigits=i)),U(r,o)}function W(r,e){return parseFloat(`0.${r}`).toFixed(S(e)).replace("0.","")}function g(r,e){if(r==null)return;let t=r.toString(),i=S(r);if(r<1&&i>0&&i<4){let n=t.replace("0.","");return!e||n.length===e?n:n.length<e?n.padEnd(e,"0"):n}if(r>=0&&r<10)return t.padStart(2,"0");if(r>=10)return t}function J(r){return parseInt((parseFloat(`0.${r}`)/.001).toFixed(3))}function Q(r){let e={locale:r};return r==="mk"?e.hour12=!1:r.toLowerCase()==="es-mx"&&(e.hour12=!0),x(e).formatToParts(new Date(Date.UTC(0,0,0,0,0,0))).find(({type:n})=>n==="dayPeriod")?.value?"12":"24"}function K({locale:r,meridiem:e,parts:t}){let i=["he","bs","mk"],n;if(t){if(n=t.find(({type:o})=>o==="dayPeriod")?.value||null,r&&i.includes(r)){let o=z.get(r);n==="PM"&&(n=o.pm),n==="AM"&&(n=o.am)}}else if(e)if(i.includes(r)){let o=z.get(r);n=e==="PM"?o.pm:o.am}else{let o=x({locale:r,hour12:!0}),s=6,a=18,l=new Date(Date.UTC(0,0,0,e==="AM"?s:a,0));n=o.formatToParts(l).find(({type:d})=>d==="dayPeriod")?.value||null}return n}function k(r,e){return w.numberFormatOptions={locale:r,numberingSystem:e},w.localize("1.1").split("")[1]}function I(r,e,t="latn"){let n=x({locale:e,numberingSystem:t}).formatToParts(new Date(Date.UTC(0,0,0,0,0,0)));return h(`${r}Suffix`,n)}function h(r,e,t="en"){if(!r||!e)return null;if(r==="hourSuffix"){let i=e.indexOf(e.find(({type:s})=>s==="hour")),n=e.indexOf(e.find(({type:s})=>s==="minute")),o=e[i+1];return o&&o.type==="literal"&&n-i===2&&o.value?.trim()||null}if(r==="minuteSuffix"){let i=e.indexOf(e.find(({type:s})=>s==="minute")),n=e.indexOf(e.find(({type:s})=>s==="second")),o=e[i+1];return o&&o.type==="literal"&&n-i===2&&o.value?.trim()||null}if(r==="secondSuffix"){let i,n=e.indexOf(e.find(({type:o})=>o==="fractionalSecond"));if(n)i=e[n+1];else{let o=e.indexOf(e.find(({type:s})=>s==="second"));i=e[o+1]}return i?.type==="literal"&&i.value?.trim()||null}return r==="meridiem"&&(e.find(({type:n})=>n==="dayPeriod")?.value||null)?K({locale:t,parts:e}):e.find(({type:i})=>i===r)?.value||null}function E(r){if(!f(r))return null;let e=parseInt(r);return e>=0&&e<=11?"AM":"PM"}function X(r){return new Intl.DateTimeFormat(r,{hour:"2-digit",hour12:!0,minute:"2-digit",timeZone:"UTC"}).formatToParts(new Date(Date.UTC(0,0,0,0,0))).findIndex(i=>i.type==="dayPeriod")}function V(r){let e=typeof r=="string";if(!r||e&&(r.startsWith(":")||r.endsWith(":"))||!e&&(!r.hour||!r.minute))return!1;let t,i,n;if(e?[t,i,n]=r.split(":"):{hour:t,minute:i,second:n}=r,!t||!i)return!1;let o=parseInt(t),s=parseInt(i),a=parseInt(n),l=f(t)&&o>=0&&o<24,u=f(i)&&s>=0&&s<60,d=f(n)&&a>=0&&a<60;return!!(l&&u&&!n||l&&u&&d)}function Y(r,e){if(e==="meridiem")return r==="AM"||r==="PM";if(!f(r))return!1;let t=Number(r),i=t>=0,n=t<24,o=t<60,s=t<=999;return e==="hour"?i&&n:e==="fractionalSecond"?i&&s:i&&o}function A({value:r,part:e,locale:t,numberingSystem:i="latn",hour12:n}){if(!Y(r,e))return;if(e==="fractionalSecond"){let u=k(t,i),d=null;if(r){w.numberFormatOptions={locale:t,numberingSystem:i};let m=w.localize("0");parseInt(r)===0?d="".padStart(r.length,m):(d=w.localize(`0.${r}`).replace(`${m}${u}`,""),d.length<r.length&&(d=d.padEnd(r.length,m)))}return d}let o=parseInt(r),s=new Date(Date.UTC(0,0,0,e==="hour"?o:e==="meridiem"?r==="AM"?0:12:0,e==="minute"?o:0,e==="second"?o:0));if(!s)return;let l=x({hour12:n,locale:t,numberingSystem:i}).formatToParts(s);return h(e,l,t)}function v({hour12:r,includeSeconds:e=!0,locale:t,numberingSystem:i="latn",parts:n=!1,step:o,value:s}){if(!V(s))return null;let{hour:a,minute:l,second:u="0",fractionalSecond:d}=_(s,o),m=new Date(Date.UTC(0,0,0,parseInt(a),parseInt(l),parseInt(u),d&&J(d))),b=x({fractionalSecondDigits:S(o),hour12:r,includeSeconds:e,locale:t,numberingSystem:i});if(n){let c=b.formatToParts(m);return{hour:h("hour",c),hourSuffix:h("hourSuffix",c),minute:h("minute",c),minuteSuffix:h("minuteSuffix",c),second:h("second",c),decimalSeparator:k(t,i),fractionalSecond:h("fractionalSecond",c),secondSuffix:t!=="bg"&&h("secondSuffix",c),meridiem:h("meridiem",c,t)}}else{let c=b.format(m)||null;if(!n&&typeof c=="string"&&t==="bg"&&c&&c.includes(" \u0447.")&&(c=c.replaceAll(" \u0447.","")),["he","bs","mk"].includes(t)){let M=z.get(t);c.includes("AM")?c=c.replaceAll("AM",M.am):c.includes("PM")&&(c=c.replaceAll("PM",M.pm)),t!=="he"&&c.indexOf(".")!==c.length-1&&(c=c.replace(".",","))}return c}}function _(r,e){if(V(r)){let[t,i,n]=r.split(":"),o=n,s=null;return n?.includes(".")&&([o,s]=n.split(".")),e&&(s=W(s,e)),{fractionalSecond:s,hour:t,minute:i,second:o}}return{fractionalSecond:null,hour:null,minute:null,second:null}}function L(r,e=60){if(!V(r))return null;let t,i,n,o,s,a=null;return typeof r=="string"?([t,i,o]=r.split(":"),[n,s]=o?.split(".")||["0"]):(t=r.hour,i=r.minute,n=r.second,s=r.fractionalSecond),t&&i&&(a=`${g(parseInt(t))}:${g(parseInt(i))}`,e<60&&(a+=`:${g(parseInt(n||"0"))}`,e<1&&(a+=`.${W(s||"0",e)}`))),a}var T=class extends O{constructor(){super(...arguments),this.localizedDecimalSeparator=".",this.userChangedValue=!1,this.handleHourKeyDownEvent=e=>{let t=e.key;if(P.includes(t)){let i=parseInt(t),n;if(f(this.hour))switch(this.hourFormat){case"12":n=this.hour==="01"&&i>=0&&i<=2?`1${i}`:i;break;case"24":this.hour==="01"?n=`1${i}`:this.hour==="02"&&i>=0&&i<=3?n=`2${i}`:n=i;break}else n=i;this.setValuePart("hour",n)}else switch(t){case"Backspace":case"Delete":e.preventDefault(),this.setValuePart("hour",null);break;case"ArrowDown":e.preventDefault(),this.decrementHour();break;case"ArrowUp":e.preventDefault(),this.incrementHour();break;case" ":case"Spacebar":e.preventDefault();break}},this.handleMinuteKeyDownEvent=e=>{let t=e.key;if(P.includes(t)){let i=parseInt(t),n;if(f(this.minute)&&this.minute.startsWith("0")){let o=parseInt(this.minute);n=o>B?i:`${o}${i}`}else n=i;this.setValuePart("minute",n)}else switch(t){case"Backspace":case"Delete":e.preventDefault(),this.setValuePart("minute",null);break;case"ArrowDown":e.preventDefault(),this.decrementMinute();break;case"ArrowUp":e.preventDefault(),this.incrementMinute();break;case" ":case"Spacebar":e.preventDefault();break}},this.handleSecondKeyDownEvent=e=>{let t=e.key;if(P.includes(t)){let i=parseInt(t),n;if(f(this.second)&&this.second.startsWith("0")){let o=parseInt(this.second);n=o>B?i:`${o}${i}`}else n=i;this.setValuePart("second",n)}else switch(t){case"Backspace":case"Delete":e.preventDefault(),this.setValuePart("second",null);break;case"ArrowDown":e.preventDefault(),this.decrementSecond();break;case"ArrowUp":e.preventDefault(),this.incrementSecond();break;case" ":case"Spacebar":e.preventDefault();break}},this.handleFractionalSecondKeyDownEvent=e=>{let{key:t}=e;if(P.includes(t)){let i=S(this.component.step),n=parseInt(this.fractionalSecond),o=n.toString().length,s;o>=i?s=t.padStart(i,"0"):o<i&&(s=`${n}${t}`.padStart(i,"0")),this.setValuePart("fractionalSecond",parseFloat(`0.${s}`))}else switch(t){case"Backspace":case"Delete":e.preventDefault(),this.setValuePart("fractionalSecond",null);break;case"ArrowDown":e.preventDefault(),this.nudgeFractionalSecond("down");break;case"ArrowUp":e.preventDefault(),this.nudgeFractionalSecond("up");break;case" ":e.preventDefault();break}},this.handleMeridiemKeyDownEvent=e=>{switch(e.key){case"a":this.setValuePart("meridiem","AM");break;case"p":this.setValuePart("meridiem","PM");break;case"Backspace":case"Delete":e.preventDefault(),this.setValuePart("meridiem");break;case"ArrowUp":e.preventDefault(),this.toggleMeridiem("up");break;case"ArrowDown":e.preventDefault(),this.toggleMeridiem("down");break;case" ":case"Spacebar":e.preventDefault();break}},this.calciteTimeChange=y()}decrementHour(){let e=this.hour?this.hour==="00"?23:parseInt(this.hour)-1:0;this.setValuePart("hour",e)}decrementMinute(){this.decrementMinuteOrSecond("minute")}decrementSecond(){this.decrementMinuteOrSecond("second")}incrementHour(){let e=f(this.hour)?this.hour==="23"?0:parseInt(this.hour)+1:1;this.setValuePart("hour",e)}incrementMinute(){this.incrementMinuteOrSecond("minute")}incrementSecond(){this.incrementMinuteOrSecond("second")}nudgeFractionalSecond(e){let t=F(this.component.step),i=S(this.component.step),n=parseInt(this.fractionalSecond),o=parseFloat(`0.${this.fractionalSecond}`),s,a,l,u;e==="up"&&(s=isNaN(n)?0:o+t,a=parseFloat(s.toFixed(i)),l=F(a),u=a<1&&S(l)>0?g(l,i):"".padStart(i,"0")),e==="down"&&(s=isNaN(n)||n===0?1-t:o-t,a=parseFloat(s.toFixed(i)),l=F(a),u=a<1&&S(l)>0&&Math.sign(l)===1?g(l,i):"".padStart(i,"0")),this.setValuePart("fractionalSecond",u)}toggleMeridiem(e){let t;this.meridiem?t=this.meridiem==="AM"?"PM":"AM":t=e==="down"?"PM":"AM",this.setValuePart("meridiem",t)}hostConnected(){this.setHourFormat(),this.setMeridiemOrder(),this.setValue(this.component.value)}hostUpdate(e){let t=!1,i=!1,n=!1;if(e.has("hourFormat")&&(t=!0,n=!0),e.has("messages")&&e.get("messages")?._lang!==this.component.messages._lang&&(t=!0,i=!0,n=!0),e.has("numberingSystem")&&(n=!0),e.has("step")){let o=this.component.step,s=e.get("step");(o>=60&&s>0&&s<60||s>=60&&o>0&&o<60)&&(n=!0)}t&&this.setHourFormat(),i&&this.setMeridiemOrder(),n&&this.setValue(this.component.value)}decrementMinuteOrSecond(e){let t;if(f(this[e])){let i=parseInt(this[e]);t=i===0?59:i-1}else t=59;this.setValuePart(e,t)}incrementMinuteOrSecond(e){let t=f(this[e])?this[e]==="59"?0:parseInt(this[e])+1:0;this.setValuePart(e,t)}setHourFormat(){let{hourFormat:e,messages:t}=this.component,i=t._lang;this.hourFormat=e==="user"?Q(i):e}setMeridiemOrder(){let{messages:e}=this.component,t=e._lang;this.meridiemOrder=X(t)}setValue(e,t=!1){let{messages:i,numberingSystem:n,step:o,value:s}=this.component,a=i._lang,l=this.hourFormat==="12",u=L(e,o);if(V(e)){let{hour:d,minute:m,second:b,fractionalSecond:c}=_(u,o),{hour:M,hourSuffix:D,minute:p,minuteSuffix:q,second:Z,secondSuffix:G,decimalSeparator:R,fractionalSecond:j,meridiem:H}=v({hour12:l,locale:a,numberingSystem:n,parts:!0,step:o,value:u});this.hour=d,this.minute=m,this.second=b,this.fractionalSecond=c,this.localizedHour=M,this.localizedHourSuffix=D,this.localizedMinute=p,this.localizedMinuteSuffix=q,this.localizedSecond=Z,this.localizedDecimalSeparator=R,this.localizedFractionalSecond=j,this.localizedSecondSuffix=G,H&&(this.meridiem=E(this.hour),this.localizedMeridiem=H)}else this.hour=null,this.minute=null,this.second=null,this.fractionalSecond=null,this.meridiem=null,this.localizedHour=null,this.localizedHourSuffix=I("hour",a,n),this.localizedMinute=null,this.localizedMinuteSuffix=I("minute",a,n),this.localizedSecond=null,this.localizedDecimalSeparator=k(a,n),this.localizedFractionalSecond=null,this.localizedSecondSuffix=I("second",a,n),this.localizedMeridiem=null;u!==s?(this.userChangedValue=t,this.component.value=u??""):this.component.requestUpdate()}setValuePart(e,t){let{hourFormat:i}=this,{messages:n,numberingSystem:o,step:s}=this.component,a=n._lang,l=i==="12",u=this.component.value;if(e==="meridiem"){let D=this.meridiem;if(this.meridiem=t,this.localizedMeridiem=A({hour12:l,locale:a,numberingSystem:o,part:"meridiem",value:this.meridiem}),f(this.hour)){let p=parseInt(this.hour);switch(t){case"AM":p>=12&&(this.hour=g(p-12));break;case"PM":p<12&&(this.hour=g(p+12));break;default:this.component.value="";break}this.localizedHour=A({hour12:l,locale:a,numberingSystem:o,part:"hour",value:this.hour})}D!==this.meridiem&&this.component.requestUpdate()}else if(e==="fractionalSecond"){let D=this.fractionalSecond,p=S(s);typeof t=="number"?this.fractionalSecond=t===0?"".padStart(p,"0"):g(t,p):this.fractionalSecond=t,this.localizedFractionalSecond=A({value:this.fractionalSecond,part:"fractionalSecond",locale:a,numberingSystem:o,hour12:l}),D!==this.fractionalSecond&&this.component.requestUpdate()}else{let D=this[e];this[e]=typeof t=="number"?g(t):t,this[`localized${C(e)}`]=A({value:this[e],part:e,locale:a,numberingSystem:o,hour12:l}),D!==this[e]&&this.component.requestUpdate()}let{hour:d,minute:m,second:b,fractionalSecond:c}=this,M=L({hour:d,minute:m,second:b,fractionalSecond:c},s);u!==M&&(e==="hour"&&i==="12"&&(this.meridiem=E(d),this.localizedMeridiem=K({locale:a,meridiem:this.meridiem})),this.userChangedValue=!0,this.calciteTimeChange.emit(M??""))}},se=$(T);export{se as a};
